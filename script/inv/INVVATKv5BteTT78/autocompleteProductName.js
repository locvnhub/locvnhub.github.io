;// fix autocompleteProductName 1-9-2024
function autocompleteProductName(t){var e="name"==(t=t||"name")?"Name":"Code";$("table.products tbody input."+t).unbind("autocompleteopen"),$("table.products tbody input."+t).unbind("autocompleteclose"),$("table.products tbody input."+t).data("autocomplete_on",!1).bind("autocompleteopen",function(t,e){$(this).data("autocomplete_on",!0)}).bind("autocompleteclose",function(t,e){$(this).data("autocomplete_on",!1)}).autocomplete({source:function(i,o){console.log("request.term",i),i.term=i.term||"",i.term=i.term.toLowerCase(),$.ajax({type:"POST",url:"/Product/SeachBy"+e,dataType:"JSON",data:{searchText:i.term},success:function(e){null===e&&("name"==t?$(this).parents("tr:first").find("input.Code").val(""):$(this).parents("tr:first").find("input.Name").val(""));var n=[];n="code"==t?n.concat(e.filter(t=>0==t.Code.toLowerCase().indexOf(i.term)).slice(0,5)).concat(e.filter(t=>1==t.Code.toLowerCase().indexOf(i.term)).slice(0,3)).concat(e.filter(t=>3==t.Code.toLowerCase().indexOf(i.term)).slice(0,3)).concat(e.filter(t=>t.Code.toLowerCase().indexOf(i.term)>1).slice(0,5)):n.concat(e.filter(t=>0==t.Name.toLowerCase().indexOf(i.term)).slice(0,5)).concat(e.filter(t=>1==t.Name.toLowerCase().indexOf(i.term)).slice(0,3)).concat(e.filter(t=>3==t.Name.toLowerCase().indexOf(i.term)).slice(0,3)).concat(e.filter(t=>t.Name.toLowerCase().indexOf(i.term)>0).slice(0,5)),o($.map(n,function(t){return{label:t.Code+" | "+t.Name,Name:t.Name,Unit:t.Unit,Price:t.Price,Code:t.Code}}))}})},minLength:1,select:function(i,o){return $(this).parents("tr:first").find("input.unit").val(o.item.Unit),"name"==t?$(this).parents("tr:first").find("input.code").val(o.item.Code):$(this).parents("tr:first").find("input.name").val(o.item.Name),$(this).parents("tr:first").find("input.price").val(o.item.Price.toString().replace(".",",")).trigger("focusout"),9!=i.which||9!=i.keyCode?$(this).parents("tr:first").find("input.quantity").focus():$(this).parents("tr:first").find("input.unit").focus(),$(this).val(o.item[e]).trigger("change"),!1},appendTo:"#searchAutocomplete",open:function(){var t=$(this).position(),e=t.left,i=t.top+20;$("#searchAutocomplete > ul").css({left:e+"px",top:i+"px"})}})}$(document).ready(function(){bindEvents2Table()});
